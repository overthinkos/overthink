depends:
  - cuda
  - supervisord

env:
  NVIDIA_PYTHON_PROJECT: "~/.pixi"
  LLAMA_CPP_PATH: "~/llama.cpp"
  UNSLOTH_SKIP_LLAMA_CPP_INSTALL: "1"
  LD_LIBRARY_PATH: "/usr/lib64:$HOME/llama.cpp"

path_append:
  - "~/llama.cpp"

ports:
  - 8888

service: |
  [program:jupyter]
  command=pixi run start-jupyter
  directory=%(ENV_HOME)s
  autostart=true
  autorestart=true
  stdout_logfile=/dev/stdout
  stdout_logfile_maxbytes=0
  stderr_logfile=/dev/stderr
  stderr_logfile_maxbytes=0
