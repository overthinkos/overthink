defaults:
  registry: ghcr.io/test
  tag: auto
  base: "quay.io/fedora/fedora:43"
  platforms:
    - linux/amd64
    - linux/arm64
  pkg: rpm

images:
  base:
    layers:
      - pixi

  cuda:
    layers:
      - pixi
      - cuda
    platforms:
      - linux/amd64

  ml-cuda:
    base: cuda
    layers:
      - python
      - ml-libs

  inference:
    base: ml-cuda
    layers:
      - supervisord
      - ollama
    tag: nightly

  ubuntu-dev:
    base: "ubuntu:24.04"
    layers:
      - pixi
      - nodejs
    pkg: deb

  bazzite:
    base: "ghcr.io/ublue-os/bazzite:stable"
    bootc: true
    layers:
      - custom-packages
    platforms:
      - linux/amd64

  disabled-image:
    enabled: false
    layers:
      - nonexistent-layer
